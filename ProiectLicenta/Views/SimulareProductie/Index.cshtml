@using ProiectLicenta.ViewModels
@model DateRecoltareViewModel

@{
    ViewData["Title"] = "Simulare Productie";
    int parcelaSelectata = Model.parcelaSelectata != null ? Model.parcelaSelectata : 0;
    DateTime dataInceput = Model.dataInceput != null ? (DateTime)Model.dataInceput : DateTime.Today;
    DateTime dataSfarsit = Model.dataSfarsit != null ? (DateTime)Model.dataSfarsit : DateTime.Today;
}

<h1 class="fw-bold pb-2 pb-xl-3 text-center"><i class="bi bi-card-list"></i> Simulare Productie</h1>
<div>
    <a class="btn btn-warning me-3" href="@Url.Action("Index", "Home")"><i class="bi bi-arrow-left"></i> Inapoi</a>
    <form method="post" action="@Url.Action("Index", new {parcelaSelectata,dataInceput, dataSfarsit})">
        <div class="form-group mt-3 mb-3">
            <select class="form-select form-control-lg" name="parcelaSelectata" asp-items="ViewBag.Parcele">
                <option value="0" hidden>Alege Parcela</option>
            </select>
        </div>
        <div class="form-group mb-3">
            <label for="dataInceput">Data Inceput</label>
            <input type="date" class="form-control" name="dataInceput" required asp-for="dataInceput" />
        </div>
        <div class="form-group mb-3">
            <label for="dataSfarsit">Data Sfarsit</label>
            <input type="date" class="form-control" name="dataSfarsit" required asp-for="dataSfarsit" />
        </div>
        <input class="btn btn-primary mt-3 mb-3" type="submit" value="Generare Raport" />
    </form>

    @if (Model.RecoltareData != null && Model.RecoltareData.Any())
    {
        <h2 class="mt-4 text-center">Rezultate</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Cod Recoltare</th>
                    <th>Cantitate Recoltata</th>
                    <th>Data Recoltare</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.RecoltareData)
                {
                    <tr>
                        <td>@item.CodRecoltare</td>
                        <td>@item.CantitateRecoltata</td>
                        <td>@item.DataRecoltare.ToString("dd/MM/yyyy")</td>
                    </tr>
                }
                
            </tbody>
        </table>
    }
    else
    {
        <p>Nu exista date.</p>
    }
</div>
